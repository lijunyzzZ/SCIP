# 构造数据抽象

上一章节讲的是，将一些过程复合起来，然后以这种方式去构建不同的抽象，在这一章节里面使用复合数据结构来构造抽象。

使用复合对象的好处，抽象级别比基本对象搞一个档次，可以更加抽象问题去解决。而不是局限于数值和字符。也可以进一步提高系统的模块性。

最基本的数据结构就是对偶（pair）

如果可以吧有理数当做对象处理，就有可能吧处理的程序部分和有理数如何表示隔离开，增强了模块化

一旦传入的参数不仅仅是基本类型，那么抽象涵盖的意义就大不一样的，就是一个可以无限解释的抽象。

## 数据导向的程序设计

允许孤立的设计每一种数据表示，然后用组合的形式来将他们组合起来。

## 数据抽象导引

认为规定数据格式，我认为你是这样就是这样，不是就不是。

## 抽象屏障

有理数里面有分子分母，别人在操作有理数的时候实际上是通过对象的api来操作。此时外部无需关心这个有理数里面有什么，这就是抽象屏障
对数据对象标识出一组操作（API）去操作数据对象，这样消费者就不用关心他内部的实现，

-----[使用有理数的程序]--------
    问题域中的有理数
------[addRat mulRat]--------
    作为分子或者分母的有理数
-------[makeRat number denmo]------
    作为序对的有理数
------[cons car cdr]-------
    序对也需要实现
如上图所示，这个抽象不仅仅是让用户不关心抽象内部的内容，而是让用户没有办法关心，就像一个屏障一样挡住了用户的好奇。

越是复杂的数据结构，都能以不同的方式以程序的基本语言构造出来。也是系统的模块化更加清晰。但是有个不足的地方就是使用一个数据结构，需要重构的时候
可能需要修改很多地方，这个时候就考研写的人的编码能力在程序上模块解耦度更加高，也就是不同模块之间的数据结构不能混用，不然会照成难以估计的后果。

### 懒加载的问题

在构建一个有理数的时候是构建的时候约分还是在访问分子分母的时候约分，这个其实考虑的是使用场景，如果场景访问分子分母要少一些的话，就访问的时候约分，反之在构建的时候约分。


